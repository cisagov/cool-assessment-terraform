# Private DNS A record for pentest portal instances
resource "aws_route53_record" "pentestportal_A" {
  count    = lookup(var.operations_instance_counts, "pentestportal", 0)
  provider = aws.provisionassessment

  name    = "pentestportal${count.index + 1}.${aws_route53_zone.assessment_private.name}"
  records = [aws_instance.pentestportal[count.index].private_ip]
  ttl     = var.dns_ttl
  type    = "A"
  zone_id = aws_route53_zone.assessment_private.zone_id
}
